
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>这里是标题</title>
    <meta name="description" content="">
    <!--<link rel="stylesheet" href="/assets/css/bootstrap.min.css">-->
    <!--<link rel="stylesheet" href="/assets/css/font-awesome.min.css">-->
    <link rel="icon" type="image/png" href="/favicon.ico">
    <link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/syntax-highlight.css">
    <link rel="stylesheet" href="assets/css/style-my.css">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MTM4J5');</script>
<!-- End Google Tag Manager -->


    <link rel="stylesheet" href="assets/css/proj-layout.css">

    <script src="https://cdn.rawgit.com/showdownjs/showdown/1.4.4/dist/showdown.min.js"></script>

<!-- <script src="../bower_components/modernizr/modernizr.js"></script>
<script src="../bower_components/es5-shim/es5-shim.js"></script>
<script src="../bower_components/es6-shim/es6-shim.js"></script>
<script src="../bower_components/jquery/dist/jquery.js"></script>
<script src="../bower_components/angular/angular.js"></script>
<script src="../bower_components/angular-animate/angular-animate.js"></script>
<script src="../bower_components/angular-cookies/angular-cookies.js"></script>
<script src="../bower_components/angular-touch/angular-touch.js"></script>
<script src="../bower_components/angular-sanitize/angular-sanitize.js"></script>
<script src="../bower_components/angular-resource/angular-resource.js"></script>
<script src="../bower_components/angular-ui-router/release/angular-ui-router.js"></script>
<script src="../bower_components/bootstrap-sass-official/assets/javascripts/bootstrap.js"></script>
<script src="../bower_components/angular-bootstrap/ui-bootstrap-tpls.js"></script>
 -->


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.28/angular.min.js"></script>
<!-- <script src="../bower_components/angular-animate/angular-animate.js"></script> -->
<!-- <script src="../bower_components/angular-cookies/angular-cookies.js"></script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-touch/1.5.8/angular-touch.min.js"></script>
<!-- <script src="../bower_components/angular-sanitize/angular-sanitize.js"></script> -->
<!-- <script src="../bower_components/angular-resource/angular-resource.js"></script> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.13/angular-ui-router.js"></script>


    <script src="assets/js/util.js"></script>

    <!--<script src="/assets/js/jquery.js"></script>-->
    <!--<script src="/assets/js/modernizr.min.js"></script>-->
    <!--<script src="/assets/js/bootstrap.min.js"></script>-->
</head>

<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MTM4J5"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<header>
    <nav class="navbar navbar-default" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <p class="site-name"><a class="navbar-brand" href="/" title="phoenixqm">phoenixqm 算法与架构</a></p>
            </div>
            <div class="collapse navbar-collapse">
                <ul class="nav navbar-nav">
                    <li><a href="/">HOME</a></li>
                    <li><a href="/about.html">About</a></li>
                    <li><a href="/list.html">Posts</a></li>
                    <li><a href="https://github.com/phoenixqm" target="_blank">Github</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- .site-navigation -->
</header>


    <div id="post-content" class="container">
        <br>
        <div class="well">
            <header class="page-header">
                <h1>这里是标题</h1>
                <p class="post-meta">这里是时间</p>
            </header>

            <article id="markdowngen">
                这里是正文
            </article>

            <!-- <article><p>这里是摘要</p></article> -->
        </div>
    </div><!--#post-content-->

    <div id="ds-comment" class="container">
        <!-- 多说评论框 start -->
            <div class="ds-thread" data-thread-key="xxxx-xxxx" data-title="这里是标题"
            data-url="http://phoenixqm.github.io/app/post.html?key=xxxx-xxxx"></div>
        <!-- 多说评论框 end -->
        <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
        <script type="text/javascript">

var duoshuoQuery = {short_name:"phoenixqm"};


$(document).ready(function() {

    var obj = {};
    var key = getURLParameter("key");

    console.log(key)

    $.ajax({
        type: "GET",
        url: "posts/post_list.json",
        dataType: "text",
        success: function(jsonstr) {


            var data = angular.fromJson(jsonstr);
            console.log(data);
            for (var j = 0; j < data.posts.length; j++) {
                if (key == data.posts[j].key){
                    obj = data.posts[j];
                }
            }
            console.log(obj);

            fillPost();
            initDoushuo();
        }
    });

    // // Let's process the data from the data file
    // function processData(data) {
    //     var lines = data.split(/\r\n|\n/);

    //     var headings = lines[0].split('|');
    //     for (var i = 0; i < headings.length; i++) {
    //         headings[i] = trim(headings[i]);
    //     }

    //     for (var j = 1; j < lines.length; j++) {

    //         var values = lines[j].split('|');
    //         var datakey = trim(values[0]);
    //         if (datakey.indexOf("*") == 0) {
    //             datakey = datakey.substring(1);
    //         }
    //         if (datakey == key) {
    //             for (var k = 0; k < values.length; k++) {
    //                 obj[headings[k]] = trim(values[k]);
    //             }
    //             obj.key = datakey;
    //             break;
    //         }

    //     }

    //     console.log(obj);

    // }


    function fillPost(){

        var post = $("#post-content");
        var ds = $("#ds-comment");

        post.attr("id", "_item_" + obj.key);
        post.find("header.page-header > h1").html(obj.title);
        $(document).attr("title", obj.title);
        post.find("p.post-meta").html(obj.time);

        // 正文页面不显示摘要
        // post.find("article > p").html(obj.summary);

        ds.find("div.data-thread").attr("data-thread-key", obj.key);
        ds.find("div.data-thread").attr("data-title", obj.title);
        ds.find("div.data-thread").attr("data-url", "http://phoenixqm.github.io/app/post.html?key=" + obj.key);

        renderMarkdown();
    }

    function renderMarkdown(){
        var converter = new showdown.Converter();

        var article = document.getElementById("markdowngen");
        console.log(obj.key);
        $.ajax({
          url: "posts/"+obj.key+".md",
          beforeSend: function( xhr ) {
            // xhr.overrideMimeType( "text/plain; charset=x-user-defined" );
          }
        })
        .done(function( data ) {
          if ( console && console.log ) {
            console.log(data);
            var html = converter.makeHtml(data);
            article.innerHTML = html;
          }
        });

    }

    function initDoushuo(){

        (function() {
            var ds = document.createElement('script');
            ds.type = 'text/javascript';ds.async = true;
            ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            ds.charset = 'UTF-8';
            (document.getElementsByTagName('head')[0]
             || document.getElementsByTagName('body')[0]).appendChild(ds);
        })();

    }


});



        </script>
        <!-- 多说公共JS代码 end -->
    </div><!--#ds-comment-->

<footer id="colophon" class="site-footer" role="contentinfo">
    <div class="site-info container">
        <div class="row">
            <nav id="menu-social" class="social-icons">
                <ul id="menu-social-items" class="social-menu">
                    <li><a href="https://github.com/phoenixqm" title="Github" class="rss" target="_blank"><i class="social_icon fa fa-github"><span>Github</span></i></a></li>
                    <li><a href="http://weibo.com/phoenixqm" title="Weibo" class="youtube" target="_blank"><i class="social_icon fa fa-weibo"><span>Weibo</span></i></a></li>
                    <li><a href="https://twitter.com/phoenixqm" title="Twitter" class="twitter" target="_blank"><i class="social_icon fa fa-twitter"><span>Twitter</span></i></a></li>
                    <!-- <li><a href="https://plus.google.com/u/0/101153267739962807712/posts" title="Google+" class="googleplus" target="_blank"><i class="social_icon fa fa-googleplus"><span>GooglePlus</span></i></a></li> -->
                    <li><a href="about.html#wechatQr" title="Wechat" class="facebook" target="_blank"><i class="fa fa-weixin"><span>Wechat</span></i></a></li>
                </ul>
            </nav>
            <nav role="navigation" class="col-md-6">
                <ul id="menu-flat-footer" class="nav footer-nav clearfix">
                    <li><a href="http://weibo.com/phoenixqm">Weibo</a></li>
                    <li><a href="https://github.com/phoenixqm">Github</a></li>
                    <li><a href="https://www.zhihu.com/people/yeying-80">zhihu</a></li>
                    <!-- <li><a href="http://www.youtube.com/user/bootstrapbayofficial">Lofter</a></li> -->
                    <li><a href="http://phoenixqm.github.io/">Blog</a></li>
                </ul>
            </nav>
            <div class="copyright col-md-6">
                <a href="http://phoenixqm.github.io/" title="Sparkling">phoenixqm</a> All rights reserved. Theme by
                <a href="http://colorlib.com/" target="_blank">Colorlib</a> and <a href="http://wwsun.github.io/" target="_blank">wwsun</a>. Powered by
                <a href="https://pages.github.com/" target="_blank">Github Pages</a> and <a href="https://jekyllrb.com/" target="_blank">Jekyll</a>
            </div>
        </div>
    </div>
    <!-- .site-info -->
    <div class="scroll-to-top"><i class="fa fa-angle-up"></i></div>
    <!-- .scroll-to-top -->
</footer><!-- #colophon -->


</body>

</html>